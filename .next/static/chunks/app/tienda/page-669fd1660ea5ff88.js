(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{7440:function(e,t,s){Promise.resolve().then(s.bind(s,428))},428:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return page}});var r=s(7437),a=s(2265),productos=function(e){return(0,r.jsx)("div",{className:"w-full p-4",children:(0,r.jsxs)("div",{className:"card rounded-lg items-center shadow-md",children:[(0,r.jsx)("center",{children:(0,r.jsx)("img",{src:e.imagen,className:"w-full h-48 object-cover",alt:e.nombre})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h5",{className:"text-lg font-semibold",children:e.nombre}),(0,r.jsxs)("h3",{className:"text-sky-400 font-bold",children:["Q",e.preciodescuento]}),(0,r.jsx)("button",{className:"bg-blue-500 mt-5 text-white px-4 py-2 rounded-full hover:bg-blue-600",onClick:e.onAddToCart,children:"Agregar al carrito"})]})]})})};let Carrito=class Carrito extends a.Component{render(){let{items:e,total:t,onRemoveFromCart:s}=this.props,a=e.map(e=>(0,r.jsx)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{children:[e.nombre," - Q ",e.preciodescuento," x ",e.cantidad,(0,r.jsx)("input",{type:"hidden",name:"nombre",value:e.nombre}),(0,r.jsx)("input",{type:"hidden",name:"desc",value:e.descripcion}),(0,r.jsx)("input",{type:"hidden",name:"cantidad",value:e.cantidad}),(0,r.jsx)("input",{type:"hidden",name:"precio",value:e.preciodescuento})]}),(0,r.jsx)("button",{className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600",onClick:()=>s(e),children:"Eliminar"})]})},e.ID));return(0,r.jsxs)("div",{className:"cart",children:[a,(0,r.jsxs)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:[(0,r.jsxs)("p",{children:["Total: Q ",t]}),(0,r.jsx)("input",{type:"hidden",name:"total",value:t})]})]})}};var n=s(4033),page=function(){let e=(0,n.useRouter)(),t=localStorage.getItem("correo"),[s,o]=(0,a.useState)(0),[i,l]=(0,a.useState)([]),[d,c]=(0,a.useState)(0),[u,m]=(0,a.useState)("Todas las categor\xedas"),[h,x]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),fetchProducts=async()=>{try{let t={"Content-Type":"application/json"};e&&(t.token=e);let s=await fetch("https://api-2-xgyd.onrender.com/api/productos",{method:"GET",headers:t});if(!s.ok)throw Error("Error al cargar productos desde la API");let r=await s.json();x(r.productos),console.log(r)}catch(e){console.error(e)}};fetchProducts()},[]);let addToCart=e=>{let t=i.find(t=>t.ID===e.ID);if(t)t.cantidad+=1,l([...i]);else{let t={...e,cantidad:1};l([...i,t])}o(s+1),c(d+e.preciodescuento)},[p,f]=(0,a.useState)(!1),handleCategoryChange=e=>{m(e)},[j,g]=(0,a.useState)({email:"",nombre:"",desc:"",cantidad:0,precio:0,total:0});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:" min-h-screen",children:[(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e.replace("../")},className:"group relative w-full flex justify-center py-3 px-4    border border-transparent    text-sm font-medium rounded-md text-white   bg-rose-700 hover:bg-rose-800 focus:outline-none focus:ring-2    focus:ring-offset-2 focus:ring-indigo-500 rounded",children:"Cerrar Sesi\xf3n"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"text-white font-bold text-2xl",children:(0,r.jsx)("center",{children:"Tienda"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"w-2/3",children:(0,r.jsxs)("select",{className:"p-2 bg-white rounded",value:u,onChange:e=>handleCategoryChange(e.target.value),children:[(0,r.jsx)("option",{value:"Todas las categor\xedas",children:"Todas las categor\xedas"}),(0,r.jsx)("option",{value:"CORSAIR",children:"CORSAIR"}),(0,r.jsx)("option",{value:"ASUS",children:"ASUS"}),(0,r.jsx)("option",{value:"LOGITECH",children:"LOGITECH"})]})}),(0,r.jsx)("div",{className:"w-1/3 text-right",children:(0,r.jsx)("button",{className:"bg-yellow-500 text-white px-3 py-2 rounded",onClick:()=>f(!0),children:(0,r.jsxs)("b",{children:["Carrito: ",s]})})})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:h.filter(e=>"Todas las categor\xedas"===u||e.marca===u).map(e=>(0,r.jsx)(productos,{...e,onAddToCart:()=>addToCart(e)},e.ID))})]}),(0,r.jsx)("div",{className:"w-full w-min",children:p&&(0,r.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50  ",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-900 opacity-50"}),(0,r.jsxs)("div",{className:"relative w-1/4 bg-white p-4 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Compras"}),(0,r.jsx)("button",{className:"text-gray-500 hover:text-red-500",onClick:()=>f(!1),children:"X"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("input",{type:"hidden",name:"email",value:t||""}),(0,r.jsx)(Carrito,{items:i,total:d,onRemoveFromCart:e=>{let t=i.find(t=>t.ID===e.ID);if(t){if(t.cantidad>1)t.cantidad-=1;else{let t=i.filter(t=>t.ID!==e.ID);l(t)}o(s-1),c(d-e.preciodescuento)}}}),(0,r.jsx)("button",{children:"Pagar"})]})]})]})})]})}},622:function(e,t,s){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(2265),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,s){var r,n={},d=null,c=null;for(r in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:d,ref:c,props:n,_owner:i.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,s){"use strict";e.exports=s(622)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=7440)}),_N_E=e.O()}]);