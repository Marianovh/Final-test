(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{7440:function(e,t,s){Promise.resolve().then(s.bind(s,428))},428:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return page}});var a=s(7437),n=s(2265),productos=function(e){return(0,a.jsx)("div",{className:"w-full p-4",children:(0,a.jsxs)("div",{className:"card rounded-lg items-center shadow-md",children:[(0,a.jsx)("center",{children:(0,a.jsx)("img",{src:e.imagen,className:"w-full h-48 object-cover",alt:e.nombre})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h5",{className:"text-lg font-semibold",children:e.nombre}),(0,a.jsxs)("h3",{className:"text-sky-400 font-bold",children:["Q",e.preciodescuento]}),(0,a.jsx)("button",{className:"bg-blue-500 mt-5 text-white px-4 py-2 rounded-full hover:bg-blue-600",onClick:e.onAddToCart,children:"Agregar al carrito"})]})]})})};let Carrito=class Carrito extends n.Component{render(){let{items:e,total:t,onRemoveFromCart:s}=this.props,n=e.map(e=>(0,a.jsx)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{children:[e.nombre," - Q ",e.preciodescuento," x ",e.cantidad,(0,a.jsx)("input",{type:"hidden",name:"nombre",value:e.nombre}),(0,a.jsx)("input",{type:"hidden",name:"desc",value:e.descripcion}),(0,a.jsx)("input",{type:"hidden",name:"cantidad",value:e.cantidad}),(0,a.jsx)("input",{type:"hidden",name:"precio",value:e.preciodescuento})]}),(0,a.jsx)("button",{className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600",onClick:()=>s(e),children:"Eliminar"})]})},e.ID));return(0,a.jsxs)("div",{className:"cart",children:[n,(0,a.jsxs)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:[(0,a.jsxs)("p",{children:["Total: Q ",t]}),(0,a.jsx)("input",{type:"hidden",name:"total",value:t})]})]})}};var r=s(4033),d=s(9222),page=function(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(0),[l,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(0),[u,h]=(0,n.useState)("Todas las categor\xedas"),[x,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem("token"),fetchProducts=async()=>{try{let t={"Content-Type":"application/json"};e&&(t.token=e);let s=await d.Z.get("https://api-2-xgyd.onrender.com/api/productos",{headers:t});if(200!==s.status)throw Error("Error al cargar productos desde la API");let a=s.data;m(a.productos),console.log(a)}catch(e){console.error(e)}};checkTokenValidity(),fetchProducts()},[]);let addToCart=e=>{let a=l.find(t=>t.ID===e.ID);if(a)a.cantidad+=1,i([...l]);else{let t={...e,cantidad:1};i([...l,t])}s(t+1),c(o+e.preciodescuento)},[p,g]=(0,n.useState)(!1),handleCategoryChange=e=>{h(e)},checkTokenValidity=()=>{let t=localStorage.getItem("token");t&&e.replace("../")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:" min-h-screen",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e.replace("../")},className:"group relative w-full flex justify-center py-3 px-4    border border-transparent    text-sm font-medium rounded-md text-white   bg-rose-700 hover:bg-rose-800 focus:outline-none focus:ring-2    focus:ring-offset-2 focus:ring-indigo-500 rounded",children:"Cerrar Sesi\xf3n"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-white font-bold text-2xl",children:(0,a.jsx)("center",{children:"Tienda"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-2/3",children:(0,a.jsxs)("select",{className:"p-2 bg-white rounded",value:u,onChange:e=>handleCategoryChange(e.target.value),children:[(0,a.jsx)("option",{value:"Todas las categor\xedas",children:"Todas las categor\xedas"}),(0,a.jsx)("option",{value:"CORSAIR",children:"CORSAIR"}),(0,a.jsx)("option",{value:"ASUS",children:"ASUS"}),(0,a.jsx)("option",{value:"LOGITECH",children:"LOGITECH"})]})}),(0,a.jsx)("div",{className:"w-1/3 text-right",children:(0,a.jsx)("button",{className:"bg-yellow-500 text-white px-3 py-2 rounded",onClick:()=>g(!0),children:(0,a.jsxs)("b",{children:["Carrito: ",t]})})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:x.filter(e=>"Todas las categor\xedas"===u||e.marca===u).map(e=>(0,a.jsx)(productos,{...e,onAddToCart:()=>addToCart(e)},e.ID))})]}),(0,a.jsx)("div",{className:"w-full w-min",children:p&&(0,a.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50  ",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-900 opacity-50"}),(0,a.jsxs)("div",{className:"relative w-1/4 bg-white p-4 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Compras"}),(0,a.jsx)("button",{className:"text-gray-500 hover:text-red-500",onClick:()=>g(!1),children:"X"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(Carrito,{items:l,total:o,onRemoveFromCart:e=>{let a=l.find(t=>t.ID===e.ID);if(a){if(a.cantidad>1)a.cantidad-=1;else{let t=l.filter(t=>t.ID!==e.ID);i(t)}s(t-1),c(o-e.preciodescuento)}}}),(0,a.jsx)("button",{children:"Pagar"})]})]})]})})]})}}},function(e){e.O(0,[540,971,472,744],function(){return e(e.s=7440)}),_N_E=e.O()}]);