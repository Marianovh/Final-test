(()=>{var e={};e.id=491,e.ids=[491],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1870:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(7096),a=s(6132),i=s(7284),n=s.n(i),o=s(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["tienda",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9417)),"C:\\Final-test\\src\\app\\tienda\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9113)),"C:\\Final-test\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Final-test\\src\\app\\tienda\\page.tsx"],u="/tienda/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/tienda/page",pathname:"/tienda",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},798:(e,t,s)=>{Promise.resolve().then(s.bind(s,7855))},7855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(784),a=s(9885);function Productos(e){return r.jsx("div",{className:"w-full p-4",children:(0,r.jsxs)("div",{className:"card rounded-lg items-center shadow-md",children:[r.jsx("center",{children:r.jsx("img",{src:e.imagen,className:"w-full h-48 object-cover",alt:e.nombre})}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h5",{className:"text-lg font-semibold",children:e.nombre}),(0,r.jsxs)("h3",{className:"text-sky-400 font-bold",children:["Q",e.preciodescuento]}),r.jsx("button",{className:"bg-blue-500 mt-5 text-white px-4 py-2 rounded-full hover:bg-blue-600",onClick:e.onAddToCart,children:"Agregar al carrito"})]})]})})}let i=Productos;let Carrito=class Carrito extends a.Component{render(){let{items:e,total:t,onRemoveFromCart:s}=this.props,a=e.map(e=>r.jsx("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{children:[e.nombre," - Q ",e.preciodescuento," x ",e.cantidad,r.jsx("input",{type:"hidden",name:"nombre",value:e.nombre}),r.jsx("input",{type:"hidden",name:"desc",value:e.descripcion}),r.jsx("input",{type:"hidden",name:"cantidad",value:e.cantidad}),r.jsx("input",{type:"hidden",name:"precio",value:e.preciodescuento})]}),r.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600",onClick:()=>s(e),children:"Eliminar"})]})},e.ID));return(0,r.jsxs)("div",{className:"cart",children:[a,(0,r.jsxs)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:[(0,r.jsxs)("p",{children:["Total: Q ",t]}),r.jsx("input",{type:"hidden",name:"total",value:t})]})]})}};var n=s(7114),o=s(3258);function Tienda(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(0),[l,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(0),[p,x]=(0,a.useState)("Todas las categor\xedas"),[m,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),fetchProducts=async()=>{try{let t={"Content-Type":"application/json"};e&&(t.token=e);let s=await o.Z.get("https://api-2-xgyd.onrender.com/api/productos",{headers:t});if(200!==s.status)throw Error("Error al cargar productos desde la API");let r=s.data;h(r.productos),console.log(r)}catch(e){console.error(e)}};checkTokenValidity(),fetchProducts()},[]);let addToCart=e=>{let r=l.find(t=>t.ID===e.ID);if(r)r.cantidad+=1,d([...l]);else{let t={...e,cantidad:1};d([...l,t])}s(t+1),u(c+e.preciodescuento)},[g,f]=(0,a.useState)(!1),handleCategoryChange=e=>{x(e)},checkTokenValidity=()=>{let t=localStorage.getItem("token");t&&e.replace("../")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:" min-h-screen",children:[r.jsx("button",{onClick:()=>{localStorage.removeItem("token"),e.replace("../")},className:"group relative w-full flex justify-center py-3 px-4    border border-transparent    text-sm font-medium rounded-md text-white   bg-rose-700 hover:bg-rose-800 focus:outline-none focus:ring-2    focus:ring-offset-2 focus:ring-indigo-500 rounded",children:"Cerrar Sesi\xf3n"}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("div",{className:"text-white font-bold text-2xl",children:r.jsx("center",{children:"Tienda"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"w-2/3",children:(0,r.jsxs)("select",{className:"p-2 bg-white rounded",value:p,onChange:e=>handleCategoryChange(e.target.value),children:[r.jsx("option",{value:"Todas las categor\xedas",children:"Todas las categor\xedas"}),r.jsx("option",{value:"CORSAIR",children:"CORSAIR"}),r.jsx("option",{value:"ASUS",children:"ASUS"}),r.jsx("option",{value:"LOGITECH",children:"LOGITECH"})]})}),r.jsx("div",{className:"w-1/3 text-right",children:r.jsx("button",{className:"bg-yellow-500 text-white px-3 py-2 rounded",onClick:()=>f(!0),children:(0,r.jsxs)("b",{children:["Carrito: ",t]})})})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:m.filter(e=>"Todas las categor\xedas"===p||e.marca===p).map(e=>r.jsx(i,{...e,onAddToCart:()=>addToCart(e)},e.ID))})]}),r.jsx("div",{className:"w-full w-min",children:g&&(0,r.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50  ",children:[r.jsx("div",{className:"absolute inset-0 bg-gray-900 opacity-50"}),(0,r.jsxs)("div",{className:"relative w-1/4 bg-white p-4 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center ",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Compras"}),r.jsx("button",{className:"text-gray-500 hover:text-red-500",onClick:()=>f(!1),children:"X"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx(Carrito,{items:l,total:c,onRemoveFromCart:e=>{let r=l.find(t=>t.ID===e.ID);if(r){if(r.cantidad>1)r.cantidad-=1;else{let t=l.filter(t=>t.ID!==e.ID);d(t)}s(t-1),u(c-e.preciodescuento)}}}),r.jsx("button",{children:"Pagar"})]})]})]})})]})}let l=Tienda},9417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=s(5153);let a=(0,r.createProxy)(String.raw`C:\Final-test\src\app\tienda\page.tsx`),{__esModule:i,$$typeof:n}=a,o=a.default,l=o},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(8531);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[164,1,258,814],()=>__webpack_exec__(1870));module.exports=s})();