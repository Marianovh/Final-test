(()=>{var e={};e.id=491,e.ids=[491],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1870:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l});var a=s(7096),r=s(6132),n=s(7284),i=s.n(n),o=s(2564),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l=["",{children:["tienda",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9417)),"C:\\Final-test\\src\\app\\tienda\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9113)),"C:\\Final-test\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Final-test\\src\\app\\tienda\\page.tsx"],u="/tienda/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/tienda/page",pathname:"/tienda",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},798:(e,t,s)=>{Promise.resolve().then(s.bind(s,7855))},7855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(784),r=s(9885);function Productos(e){return a.jsx("div",{className:"w-full p-4",children:(0,a.jsxs)("div",{className:"card rounded-lg items-center shadow-md",children:[a.jsx("center",{children:a.jsx("img",{src:e.imagen,className:"w-full h-48 object-cover",alt:e.nombre})}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("h5",{className:"text-lg font-semibold",children:e.nombre}),(0,a.jsxs)("h3",{className:"text-sky-400 font-bold",children:["Q",e.preciodescuento]}),a.jsx("button",{className:"bg-blue-500 mt-5 text-white px-4 py-2 rounded-full hover:bg-blue-600",onClick:e.onAddToCart,children:"Agregar al carrito"})]})]})})}let n=Productos;let Carrito=class Carrito extends r.Component{render(){let{items:e,total:t,onRemoveFromCart:s}=this.props,r=e.map(e=>a.jsx("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{children:[e.nombre," - Q ",e.preciodescuento," x ",e.cantidad,a.jsx("input",{type:"hidden",name:"nombre",value:e.nombre}),a.jsx("input",{type:"hidden",name:"desc",value:e.descripcion}),a.jsx("input",{type:"hidden",name:"cantidad",value:e.cantidad}),a.jsx("input",{type:"hidden",name:"precio",value:e.preciodescuento})]}),a.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded-full hover:bg-red-600",onClick:()=>s(e),children:"Eliminar"})]})},e.ID));return(0,a.jsxs)("div",{className:"cart",children:[r,(0,a.jsxs)("div",{className:"bg-white p-4 my-2 rounded-lg shadow-md",children:[(0,a.jsxs)("p",{children:["Total: Q ",t]}),a.jsx("input",{type:"hidden",name:"total",value:t})]})]})}};var i=s(7114);function Tienda(){let e=(0,i.useRouter)(),t=localStorage.getItem("correo"),[s,o]=(0,r.useState)(0),[d,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(0),[p,x]=(0,r.useState)("Todas las categor\xedas"),[m,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),fetchProducts=async()=>{try{let t={"Content-Type":"application/json"};e&&(t.token=e);let s=await fetch("https://api-2-xgyd.onrender.com/api/productos",{method:"GET",headers:t});if(!s.ok)throw Error("Error al cargar productos desde la API");let a=await s.json();h(a.productos),console.log(a)}catch(e){console.error(e)}};fetchProducts()},[]);let addToCart=e=>{let t=d.find(t=>t.ID===e.ID);if(t)t.cantidad+=1,l([...d]);else{let t={...e,cantidad:1};l([...d,t])}o(s+1),u(c+e.preciodescuento)},[g,f]=(0,r.useState)(!1),handleCategoryChange=e=>{x(e)},[j,v]=(0,r.useState)({email:"",nombre:"",desc:"",cantidad:0,precio:0,total:0});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:" min-h-screen",children:[a.jsx("button",{onClick:()=>{localStorage.removeItem("token"),e.replace("../")},className:"group relative w-full flex justify-center py-3 px-4    border border-transparent    text-sm font-medium rounded-md text-white   bg-rose-700 hover:bg-rose-800 focus:outline-none focus:ring-2    focus:ring-offset-2 focus:ring-indigo-500 rounded",children:"Cerrar Sesi\xf3n"}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"text-white font-bold text-2xl",children:a.jsx("center",{children:"Tienda"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"w-2/3",children:(0,a.jsxs)("select",{className:"p-2 bg-white rounded",value:p,onChange:e=>handleCategoryChange(e.target.value),children:[a.jsx("option",{value:"Todas las categor\xedas",children:"Todas las categor\xedas"}),a.jsx("option",{value:"CORSAIR",children:"CORSAIR"}),a.jsx("option",{value:"ASUS",children:"ASUS"}),a.jsx("option",{value:"LOGITECH",children:"LOGITECH"})]})}),a.jsx("div",{className:"w-1/3 text-right",children:a.jsx("button",{className:"bg-yellow-500 text-white px-3 py-2 rounded",onClick:()=>f(!0),children:(0,a.jsxs)("b",{children:["Carrito: ",s]})})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:m.filter(e=>"Todas las categor\xedas"===p||e.marca===p).map(e=>a.jsx(n,{...e,onAddToCart:()=>addToCart(e)},e.ID))})]}),a.jsx("div",{className:"w-full w-min",children:g&&(0,a.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50  ",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-900 opacity-50"}),(0,a.jsxs)("div",{className:"relative w-1/4 bg-white p-4 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Compras"}),a.jsx("button",{className:"text-gray-500 hover:text-red-500",onClick:()=>f(!1),children:"X"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("input",{type:"hidden",name:"email",value:t||""}),a.jsx(Carrito,{items:d,total:c,onRemoveFromCart:e=>{let t=d.find(t=>t.ID===e.ID);if(t){if(t.cantidad>1)t.cantidad-=1;else{let t=d.filter(t=>t.ID!==e.ID);l(t)}o(s-1),u(c-e.preciodescuento)}}}),a.jsx("button",{children:"Pagar"})]})]})]})})]})}let o=Tienda},9417:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>d});var a=s(5153);let r=(0,a.createProxy)(String.raw`C:\Final-test\src\app\tienda\page.tsx`),{__esModule:n,$$typeof:i}=r,o=r.default,d=o},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(8531);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,a.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[164,1,814],()=>__webpack_exec__(1870));module.exports=s})();